<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
        <title>99 Scala Problems 09 - Pack consecutive duplicates of list elements into sublists - hydrphlc</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">-->
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,400italic,600italic|Roboto+Slab:400,700">

        <link rel="stylesheet" href="/theme/css/main.min.css?04100d07">


        <link href="/images/global/favicon.jpg" rel="icon">


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Article",
  "name" : "99 Scala Problems 09 - Pack consecutive duplicates of list elements into sublists",
  "author" : {
    "@type" : "Person",
    "name" : "David G"
  },
  "publisher" : {
    "@type" : "Organization",
    "name" : "The Digital Cat",
    "logo" : {
      "@type" : "ImageObject",
      "url" : "../../../../../images/global/logo_200.jpg",
      "height" : 200,
      "width" : 200
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "../../../../../blog/2015/04/07/99-scala-problems-09-pack-consecutive-duplicates/"
  },
  "datePublished" : "07/04/2015",
  "dateModified" : "28/02/2019",
  "image" : "../../../../../images/99-scala-problems.jpg",
  "url" : "../../../../../blog/2015/04/07/99-scala-problems-09-pack-consecutive-duplicates/"
}
</script>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

    <header id="header">
        <a class="logo" href="/category/programming/" title="Programming">All posts in category Programming <i class="fa fa-link"></i></a>
        <div class="align-right">
            
            <a href="/blog/2015/04/07/99-scala-problems-08-eliminate-consecutive-duplicates/"><i class="fa fa-caret-square-left"></i></a>
            
            99 Scala Problems #9

            <a href="/blog/2015/04/14/99-scala-problems-10-run-length-encoding-of-a-list/"><i class="fa fa-caret-square-right"></i></a>

        </div>
    </header>

    <!-- <article class="post"> -->

    <section id="header">
        <header class="main">
            <h1>99 Scala Problems 09 - Pack consecutive duplicates of list elements into sublists</h1>
        </header>
    </section>

    <section id="post-info">
        <div class="align-center">
            <a class="button special small" href="/categories/scala/">Scala</a>            <a class="button special small" href="/categories/functional-programming/">functional programming</a>        </div>

        <div class="align-center">
            By David G
            <span class="separator">•</span>

            Published on <time datetime="2015-04-07T09:40:00+01:00"> 07/04/2015</time>

            <span class="separator">•</span>
            Last update on
            <time datetime="2019-02-28T10:00:00+00:00"> 28/02/2019</time>
        </div>
    </section>

    <section id="content">
        <h1 id="the-problem">The problem<a class="headerlink" href="#the-problem" title="Permanent link">&para;</a></h1>
<p><strong>P09</strong> (**) Pack consecutive duplicates of list elements into sublists. If a list contains repeated elements they should be placed in separate sublists.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">pack</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;b</span><span class="o">,</span> <span class=" -Symbol">&#39;c</span><span class="o">,</span> <span class=" -Symbol">&#39;c</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;d</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">))</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">Symbol</span><span class="o">]]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;b</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;c</span><span class="o">,</span> <span class=" -Symbol">&#39;c</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;d</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">))</span>
</pre></div>


<h1 id="initial-thoughts">Initial thoughts<a class="headerlink" href="#initial-thoughts" title="Permanent link">&para;</a></h1>
<p>This is similar to <a href="../../../../../blog/2015/04/07/99-scala-problems-08-eliminate-consecutive-duplicates/">problem 08</a> but has an important difference: the result will be a list of lists. When dealing with multi-level structures like these, it is very easy to get lost, so I expect to find a recursive solution with a lot of cases or complex pattern guards.</p>
<h1 id="the-recursive-solution">The recursive solution<a class="headerlink" href="#the-recursive-solution" title="Permanent link">&para;</a></h1>
<p>The tail recursive solution is easier to write than the standard recursive one. The resulting list we are building is a <code>List[List[A]]</code>, while the remainder is just a plain list <code>List[A]</code>.</p>
<p>The first case is straightforward. The second case extracts an element from the list and, if the result is empty of the result doesn't contain that element, appends a new list. Pay attention: we have to check <code>res.last.head</code> since <code>res</code> is a list of lists. So <code>res.last</code> is the last list we put into <code>res</code> and its head is the repeated element. Obviously the same thing is accomplished by checking <code>res.last.last</code>, since this algorithm packs together equal values. The third case covers the situation in which the extracted element is already in the last list or <code>res</code>, so we have to modify the latter. To do this we separate <code>res</code> in <code>res.init</code> and <code>res.last</code>, append <code>h</code> to <code>res.last</code> (<code>res.last:::List(h)</code>) and merge again the two pieces.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">pack</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">def</span> <span class="nc">_pack</span><span class="o">(</span><span class="n">res</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]],</span> <span class="n">rem</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span> <span class="k">=</span> <span class="n">rem</span> <span class="k">match</span> <span class="o">{</span>
        <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="n">res</span>
        <span class="k">case</span> <span class="n">h</span><span class="o">::</span><span class="n">tail</span> <span class="k">if</span> <span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="n">isEmpty</span> <span class="o">||</span> <span class="n">res</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">head</span> <span class="o">!=</span> <span class="n">h</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">_pack</span><span class="o">(</span><span class="n">res</span><span class="o">:::</span><span class="nc">List</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="n">h</span><span class="o">)),</span> <span class="n">tail</span><span class="o">)</span>
        <span class="k">case</span> <span class="n">h</span><span class="o">::</span><span class="n">tail</span> <span class="k">=&gt;</span> <span class="nc">_pack</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="n">init</span><span class="o">:::</span><span class="nc">List</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="n">last</span><span class="o">:::</span><span class="nc">List</span><span class="o">(</span><span class="n">h</span><span class="o">)),</span> <span class="n">tail</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="nc">_pack</span><span class="o">(</span><span class="nc">List</span><span class="o">(),</span><span class="n">l</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>A very simpler solution, however, comes from the <code>span()</code> method of <code>List</code> objects. This method "splits this list into a prefix/suffix pair according to a predicate."</p>
<p>In other words, <code>span()</code> selects the elements of the list (preserving order) that satisfy a given function until it finds an element for which the function returns false. This is exactly what we need to pack consecutive duplicate elements. The strategy is to pack all elements with the same value of the list head element, then store this list and recursively call <code>span()</code> on the remaining list.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">pack</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">def</span> <span class="nc">_pack</span><span class="o">(</span><span class="n">res</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]],</span> <span class="n">rem</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span> <span class="k">=</span> <span class="n">rem</span> <span class="k">match</span> <span class="o">{</span>
        <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="n">res</span>
        <span class="k">case</span> <span class="n">ls</span> <span class="k">=&gt;</span> <span class="o">{</span>
            <span class="k">val</span> <span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">r</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=</span> <span class="n">rem</span> <span class="n">span</span> <span class="o">{</span> <span class="k">_</span> <span class="o">==</span> <span class="n">rem</span><span class="o">.</span><span class="n">head</span> <span class="o">}</span>
            <span class="nc">_pack</span><span class="o">(</span><span class="n">res</span><span class="o">:::</span><span class="nc">List</span><span class="o">(</span><span class="n">s</span><span class="o">),</span> <span class="n">r</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="nc">_pack</span><span class="o">(</span><span class="nc">List</span><span class="o">(),</span> <span class="n">l</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>The function I pass to <code>span()</code> is simply <code>{ _ == rem.head }</code> since the method gives the function each element in the list.</p>
<h1 id="final-considerations">Final considerations<a class="headerlink" href="#final-considerations" title="Permanent link">&para;</a></h1>
<p>This problem helped me enhance my knowledge of <strong>pattern guards</strong> and Scala <strong>anonymous functions</strong>. The solution with <code>span()</code> includes a pattern match that leads to a <strong>block expression</strong>, which was somehow a syntactical blind guess for me, but ended up being perfectly valid.</p>
<h1 id="feedback">Feedback<a class="headerlink" href="#feedback" title="Permanent link">&para;</a></h1>
<p>Feel free to use <a href="https://plus.google.com/u/0/111444750762335924049">the blog Google+ page</a> to comment the post. The <a href="https://github.com/TheDigitalCatOnline/thedigitalcatonline.github.com/issues">GitHub issues</a> page is the best place to submit corrections.</p>
    </section>

    <section id="related">

        <h1>Part 9 of the 99 Scala Problems series</h1>
        <div class="box">
            <h5>Previous articles</h5>
            <ul>
                <li><a href="/blog/2015/04/07/99-scala-problems-01-find-last-element/">99 Scala Problems 01 - Find the last element of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-02-find-last-nth/">99 Scala Problems 02 - Find the last but one element of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-03-find-kth/">99 Scala Problems 03 - Find the Kth element of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-04-length/">99 Scala Problems 04 - Find the number of elements of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-05-reverse/">99 Scala Problems 05 - Reverse a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-06-palindome/">99 Scala Problems 06 - Find out whether a list is a palindrome</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-07-flatten/">99 Scala Problems 07 - Flatten a nested list structure</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-08-eliminate-consecutive-duplicates/">99 Scala Problems 08 - Eliminate consecutive duplicates of list elements</a></li>
            </ul>
        
            <h5>Next articles</h5>
            <ul>
                <li><a href="/blog/2015/04/14/99-scala-problems-10-run-length-encoding-of-a-list/">99 Scala Problems 10 - Run-length encoding of a list.</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-11-modified-run-length-encoding/">99 Scala Problems 11 - Modified run-length encoding</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-12-decode-a-run-length-encoded-list/">99 Scala Problems 12 - Decode a run-length encoded list</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-13-run-length-encoding-of-a-list-direct-solution/">99 Scala Problems 13 - Run-length encoding of a list (direct solution)</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-14-duplicate-the-elements-of-a-list/">99 Scala Problems 14 - Duplicate the elements of a list</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-15-duplicate-the-elements-of-a-list-a-given-number-of-times/">99 Scala Problems 15 - Duplicate the elements of a list a given number of times</a></li>
                <li><a href="/blog/2015/05/13/99-scala-problems-16-20/">99 Scala Problems 16-20</a></li>
            </ul>
        </div>
    </section>



    <!-- </article> -->

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">
<div class="inner">
    <!-- Menu -->
        <nav id="menu">
            <header class="major">
                <h2>Menu</h2>
            </header>
<ul>
    <li><a href="/home/">Homepage</a></li>
    <li><a href="/pages/about.html">About</a></li>
    <!--<li><a href="/archives/index.html">Archives</a></li>-->
    <li>
        <span class="opener">Categories</span>
        <ul>
            <li><a href="/category/nature/">Nature</a></li>
            <li><a href="/category/programming/">Programming</a></li>
        </ul>
    </li>
</ul>        </nav>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Feeds</h2>
            </header>
<ul class="list-clean">


</ul>        </section>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Tags</h2>
            </header>
<ul class="list-inline list-clean" id="tags-side">
    <li class="tag font-size-4">
        <a href="/categories/beach/">Beach</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/compilers/">compilers</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/decorators/">decorators</a>
    </li>
    <li class="tag font-size-0">
        <a href="/categories/functional-programming/">functional programming</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/metaclasses/">metaclasses</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/metaprogramming/">metaprogramming</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/notebook/">Notebook</a>
    </li>
    <li class="tag font-size-3">
        <a href="/categories/oop/">OOP</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/parks/">Parks</a>
    </li>
    <li class="tag font-size-2">
        <a href="/categories/python/">Python</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/python2/">Python2</a>
    </li>
    <li class="tag font-size-2">
        <a href="/categories/python3/">Python3</a>
    </li>
    <li class="tag font-size-0">
        <a href="/categories/scala/">Scala</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/tdd/">TDD</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/testing/">testing</a>
    </li>
</ul>        </section>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Other posts</h2>
            </header>
<div class="mini-posts">
    <article>
        <a href="/blog/2015/04/07/99-scala-problems-01-find-last-element/" class="image"><img src="/images/99-scala-problems.jpg" alt="99-scala-problems" /></a>
        <p><strong>99 Scala Problems 01 - Find the last element of a list</strong> <a href="/blog/2015/04/07/99-scala-problems-01-find-last-element/">Read</a></p> 
    </article>
    <article>
        <a href="/blog/2015/04/07/99-scala-problems-06-palindome/" class="image"><img src="/images/99-scala-problems.jpg" alt="99-scala-problems" /></a>
        <p><strong>99 Scala Problems 06 - Find out whether a list is a palindrome</strong> <a href="/blog/2015/04/07/99-scala-problems-06-palindome/">Read</a></p> 
    </article>
    <article>
        <a href="/blog/2015/04/14/99-scala-problems-12-decode-a-run-length-encoded-list/" class="image"><img src="/images/99-scala-problems.jpg" alt="99-scala-problems" /></a>
        <p><strong>99 Scala Problems 12 - Decode a run-length encoded list</strong> <a href="/blog/2015/04/14/99-scala-problems-12-decode-a-run-length-encoded-list/">Read</a></p> 
    </article>
</div>        </section>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Get in touch</h2>
            </header>
<ul class="contact">



    <li class="fa fa-twitter"><a href="/">Twitter</a></li>




    <li class="fa fa-github"><a href="/">GitHub</a></li>

</ul>        </section>

    <!-- Footer -->
        <footer id="footer">
            <!--<p class="copyright">Editorial theme by: <a href="https://html5up.net">HTML5 UP</a>.</p>
            <p class="copyright">Cover picture by: <a href="https://pxhere.com/en/photo/1428515">An Min @ pxhere.com</a></p>-->
        </footer>

</div>					</div>

			</div>

		<!-- Scripts -->
			<script src="/theme/js/jquery.min.js"></script>
			<script src="/theme/js/browser.min.js"></script>
			<script src="/theme/js/breakpoints.min.js"></script>
            <script src="/theme/js/packed.js?fa89ff81"></script>

	</body>
</html>