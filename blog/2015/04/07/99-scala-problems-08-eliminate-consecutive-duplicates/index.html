<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
        <title>99 Scala Problems 08 - Eliminate consecutive duplicates of list elements - hydrphlc</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">-->
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,400italic,600italic|Roboto+Slab:400,700">

        <link rel="stylesheet" href="/theme/css/main.min.css?04100d07">


        <link href="/images/global/favicon.jpg" rel="icon">


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Article",
  "name" : "99 Scala Problems 08 - Eliminate consecutive duplicates of list elements",
  "author" : {
    "@type" : "Person",
    "name" : "David G"
  },
  "publisher" : {
    "@type" : "Organization",
    "name" : "The Digital Cat",
    "logo" : {
      "@type" : "ImageObject",
      "url" : "../../../../../images/global/logo_200.jpg",
      "height" : 200,
      "width" : 200
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "../../../../../blog/2015/04/07/99-scala-problems-08-eliminate-consecutive-duplicates/"
  },
  "datePublished" : "07/04/2015",
  "dateModified" : "28/02/2019",
  "image" : "../../../../../images/99-scala-problems.jpg",
  "url" : "../../../../../blog/2015/04/07/99-scala-problems-08-eliminate-consecutive-duplicates/"
}
</script>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

    <header id="header">
        <a class="logo" href="/category/programming/" title="Programming">All posts in category Programming <i class="fa fa-link"></i></a>
        <div class="align-right">
            
            <a href="/blog/2015/04/07/99-scala-problems-07-flatten/"><i class="fa fa-caret-square-left"></i></a>
            
            99 Scala Problems #8

            <a href="/blog/2015/04/07/99-scala-problems-09-pack-consecutive-duplicates/"><i class="fa fa-caret-square-right"></i></a>

        </div>
    </header>

    <!-- <article class="post"> -->

    <section id="header">
        <header class="main">
            <h1>99 Scala Problems 08 - Eliminate consecutive duplicates of list elements</h1>
        </header>
    </section>

    <section id="post-info">
        <div class="align-center">
            <a class="button special small" href="/categories/scala/">Scala</a>            <a class="button special small" href="/categories/functional-programming/">functional programming</a>        </div>

        <div class="align-center">
            By David G
            <span class="separator">•</span>

            Published on <time datetime="2015-04-07T09:35:00+01:00"> 07/04/2015</time>

            <span class="separator">•</span>
            Last update on
            <time datetime="2019-02-28T10:00:00+00:00"> 28/02/2019</time>
        </div>
    </section>

    <section id="content">
        <h1 id="the-problem">The problem<a class="headerlink" href="#the-problem" title="Permanent link">&para;</a></h1>
<p><strong>P08</strong> Eliminate consecutive duplicates of list elements. If a list contains repeated elements they should be replaced with a single copy of the element. The order of the elements should not be changed.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">compress</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;b</span><span class="o">,</span> <span class=" -Symbol">&#39;c</span><span class="o">,</span> <span class=" -Symbol">&#39;c</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;d</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">))</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Symbol</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;b</span><span class="o">,</span> <span class=" -Symbol">&#39;c</span><span class="o">,</span> <span class=" -Symbol">&#39;a</span><span class="o">,</span> <span class=" -Symbol">&#39;d</span><span class="o">,</span> <span class=" -Symbol">&#39;e</span><span class="o">)</span>
</pre></div>


<h1 id="initial-thoughts">Initial thoughts<a class="headerlink" href="#initial-thoughts" title="Permanent link">&para;</a></h1>
<p>This task seems to be easy to accomplish. It should be all about filtering incoming elements based on the last element added to the list.</p>
<h1 id="the-recursive-solution">The recursive solution<a class="headerlink" href="#the-recursive-solution" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">compress</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="n">l</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="nc">Nil</span>
    <span class="k">case</span> <span class="n">h</span><span class="o">::</span><span class="nc">List</span><span class="o">()</span> <span class="k">=&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="n">h</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">h</span><span class="o">::</span><span class="n">tail</span> <span class="k">if</span> <span class="o">(</span><span class="n">h</span> <span class="o">==</span> <span class="n">tail</span><span class="o">.</span><span class="n">head</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">compress</span><span class="o">(</span><span class="n">tail</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">h</span><span class="o">::</span><span class="n">tail</span> <span class="k">=&gt;</span> <span class="n">h</span><span class="o">::</span><span class="n">compress</span><span class="o">(</span><span class="n">tail</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>Instead of adding one element and then discarding the successive if equal, the point here is to discard elements until a new one pops up.</p>
<h1 id="folding">Folding<a class="headerlink" href="#folding" title="Permanent link">&para;</a></h1>
<p>The folding methods of <code>List</code> types are very suitable for this task, as they scan the whole list carrying the result of previous applications.</p>
<p>I already used <code>foldLeft()</code> so this was my first pick</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">compress</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="n">l</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]())</span> <span class="o">{</span>
    <span class="k">case</span> <span class="o">(</span><span class="nc">List</span><span class="o">(),</span> <span class="n">e</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="n">e</span><span class="o">)</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">ls</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="k">if</span> <span class="o">(</span><span class="n">ls</span><span class="o">.</span><span class="n">last</span> <span class="o">==</span> <span class="n">e</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">ls</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">ls</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">ls</span><span class="o">:::</span><span class="nc">List</span><span class="o">(</span><span class="n">e</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>The initial value given to the folding method is an empty list. Then if the previous result is empty (i.e. when scanning the first element) the result is a list with that element. If the current element is already in the result (second case) the result is returned unchanged. Otherwise, the new element is appended at the end of the result.</p>
<p>Since appending a list to an empty list is just like returning the list itself we may join the first and third cases with a modified pattern guard</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">compress</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="n">l</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]())</span> <span class="o">{</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">ls</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="k">if</span> <span class="o">(</span><span class="n">ls</span><span class="o">.</span><span class="n">isEmpty</span> <span class="o">||</span> <span class="n">ls</span><span class="o">.</span><span class="n">last</span> <span class="o">!=</span> <span class="n">e</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">ls</span><span class="o">:::</span><span class="nc">List</span><span class="o">(</span><span class="n">e</span><span class="o">)</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">ls</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">ls</span>
<span class="o">}</span>
</pre></div>


<p>Left folding implies appending new values at the end of the result list, which is syntactically less straightforward than appending at the beginning (<code>list:::List(t)</code> vs <code>h::list</code>). So we may fold from right with <code>foldRight()</code></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">compress</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="n">l</span><span class="o">.</span><span class="n">foldRight</span><span class="o">(</span><span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]())</span> <span class="o">{</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">ls</span><span class="o">)</span> <span class="k">if</span> <span class="o">(</span><span class="n">ls</span><span class="o">.</span><span class="n">isEmpty</span> <span class="o">||</span> <span class="n">ls</span><span class="o">.</span><span class="n">head</span> <span class="o">!=</span> <span class="n">e</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">e</span><span class="o">::</span><span class="n">ls</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">ls</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">ls</span>
<span class="o">}</span>
</pre></div>


<p>Remember that <code>foldLeft()</code> accepts a tuple in the form <code>(result, element)</code>, while <code>foldRight()</code> wants a tuple in the form <code>(element, result)</code>.</p>
<h1 id="final-considerations">Final considerations<a class="headerlink" href="#final-considerations" title="Permanent link">&para;</a></h1>
<p>Folding became more clear with this exercise. It's a good thing to learn ho to reverse algorithms to use <code>foldLeft()</code> or <code>foldRight()</code> according to the task we are performing.</p>
<h1 id="feedback">Feedback<a class="headerlink" href="#feedback" title="Permanent link">&para;</a></h1>
<p>Feel free to use <a href="https://plus.google.com/u/0/111444750762335924049">the blog Google+ page</a> to comment the post. The <a href="https://github.com/TheDigitalCatOnline/thedigitalcatonline.github.com/issues">GitHub issues</a> page is the best place to submit corrections.</p>
    </section>

    <section id="related">

        <h1>Part 8 of the 99 Scala Problems series</h1>
        <div class="box">
            <h5>Previous articles</h5>
            <ul>
                <li><a href="/blog/2015/04/07/99-scala-problems-01-find-last-element/">99 Scala Problems 01 - Find the last element of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-02-find-last-nth/">99 Scala Problems 02 - Find the last but one element of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-03-find-kth/">99 Scala Problems 03 - Find the Kth element of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-04-length/">99 Scala Problems 04 - Find the number of elements of a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-05-reverse/">99 Scala Problems 05 - Reverse a list</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-06-palindome/">99 Scala Problems 06 - Find out whether a list is a palindrome</a></li>
                <li><a href="/blog/2015/04/07/99-scala-problems-07-flatten/">99 Scala Problems 07 - Flatten a nested list structure</a></li>
            </ul>
        
            <h5>Next articles</h5>
            <ul>
                <li><a href="/blog/2015/04/07/99-scala-problems-09-pack-consecutive-duplicates/">99 Scala Problems 09 - Pack consecutive duplicates of list elements into sublists</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-10-run-length-encoding-of-a-list/">99 Scala Problems 10 - Run-length encoding of a list.</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-11-modified-run-length-encoding/">99 Scala Problems 11 - Modified run-length encoding</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-12-decode-a-run-length-encoded-list/">99 Scala Problems 12 - Decode a run-length encoded list</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-13-run-length-encoding-of-a-list-direct-solution/">99 Scala Problems 13 - Run-length encoding of a list (direct solution)</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-14-duplicate-the-elements-of-a-list/">99 Scala Problems 14 - Duplicate the elements of a list</a></li>
                <li><a href="/blog/2015/04/14/99-scala-problems-15-duplicate-the-elements-of-a-list-a-given-number-of-times/">99 Scala Problems 15 - Duplicate the elements of a list a given number of times</a></li>
                <li><a href="/blog/2015/05/13/99-scala-problems-16-20/">99 Scala Problems 16-20</a></li>
            </ul>
        </div>
    </section>



    <!-- </article> -->

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">
<div class="inner">
    <!-- Menu -->
        <nav id="menu">
            <header class="major">
                <h2>Menu</h2>
            </header>
<ul>
    <li><a href="/home/">Homepage</a></li>
    <li><a href="/pages/about.html">About</a></li>
    <!--<li><a href="/archives/index.html">Archives</a></li>-->
    <li>
        <span class="opener">Categories</span>
        <ul>
            <li><a href="/category/nature/">Nature</a></li>
            <li><a href="/category/programming/">Programming</a></li>
        </ul>
    </li>
</ul>        </nav>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Feeds</h2>
            </header>
<ul class="list-clean">


</ul>        </section>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Tags</h2>
            </header>
<ul class="list-inline list-clean" id="tags-side">
    <li class="tag font-size-4">
        <a href="/categories/beach/">Beach</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/compilers/">compilers</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/decorators/">decorators</a>
    </li>
    <li class="tag font-size-0">
        <a href="/categories/functional-programming/">functional programming</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/metaclasses/">metaclasses</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/metaprogramming/">metaprogramming</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/notebook/">Notebook</a>
    </li>
    <li class="tag font-size-3">
        <a href="/categories/oop/">OOP</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/parks/">Parks</a>
    </li>
    <li class="tag font-size-2">
        <a href="/categories/python/">Python</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/python2/">Python2</a>
    </li>
    <li class="tag font-size-2">
        <a href="/categories/python3/">Python3</a>
    </li>
    <li class="tag font-size-0">
        <a href="/categories/scala/">Scala</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/tdd/">TDD</a>
    </li>
    <li class="tag font-size-4">
        <a href="/categories/testing/">testing</a>
    </li>
</ul>        </section>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Other posts</h2>
            </header>
<div class="mini-posts">
    <article>
        <a href="/blog/2015/04/07/99-scala-problems-01-find-last-element/" class="image"><img src="/images/99-scala-problems.jpg" alt="99-scala-problems" /></a>
        <p><strong>99 Scala Problems 01 - Find the last element of a list</strong> <a href="/blog/2015/04/07/99-scala-problems-01-find-last-element/">Read</a></p> 
    </article>
    <article>
        <a href="/blog/2015/04/07/99-scala-problems-06-palindome/" class="image"><img src="/images/99-scala-problems.jpg" alt="99-scala-problems" /></a>
        <p><strong>99 Scala Problems 06 - Find out whether a list is a palindrome</strong> <a href="/blog/2015/04/07/99-scala-problems-06-palindome/">Read</a></p> 
    </article>
    <article>
        <a href="/blog/2015/04/14/99-scala-problems-12-decode-a-run-length-encoded-list/" class="image"><img src="/images/99-scala-problems.jpg" alt="99-scala-problems" /></a>
        <p><strong>99 Scala Problems 12 - Decode a run-length encoded list</strong> <a href="/blog/2015/04/14/99-scala-problems-12-decode-a-run-length-encoded-list/">Read</a></p> 
    </article>
</div>        </section>

    <!-- Section -->
        <section>
            <header class="major">
                <h2>Get in touch</h2>
            </header>
<ul class="contact">



    <li class="fa fa-twitter"><a href="/">Twitter</a></li>




    <li class="fa fa-github"><a href="/">GitHub</a></li>

</ul>        </section>

    <!-- Footer -->
        <footer id="footer">
            <!--<p class="copyright">Editorial theme by: <a href="https://html5up.net">HTML5 UP</a>.</p>
            <p class="copyright">Cover picture by: <a href="https://pxhere.com/en/photo/1428515">An Min @ pxhere.com</a></p>-->
        </footer>

</div>					</div>

			</div>

		<!-- Scripts -->
			<script src="/theme/js/jquery.min.js"></script>
			<script src="/theme/js/browser.min.js"></script>
			<script src="/theme/js/breakpoints.min.js"></script>
            <script src="/theme/js/packed.js?fa89ff81"></script>

	</body>
</html>